{% extends 'assays/detail_assay2.html' %}

{% block assay_content %}
 <!-- /.card -->
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title" id="Measurements">Measurements</h3>
          </div>
          <!-- /.card-header -->
          <div class="card-body" id="tabledata">
            <div id="example1_wrapper" class="dataTables_wrapper dt-bootstrap4">
              <div class="row">
                <div class="col-sm-12">
                  <table id="example1" class="table table-bordered table-hover dataTable" aria-describedby="example1_info">
                <thead class="thead-light">
                <tr>
                  <th>Mouse ID</th>
                  <th>Mouse Genotype</th>        
                  <th>Timepoint({{assay.timesteps_in|default_if_none:"TBD"}})</th>        
                  <th>Measurement Date</th>
                  <th>Thickening of the colon</th>
                  <th>Changes of the vascular pattern</th>
                  <th>Fibrin visible</th>
                  <th>Granularity of the mucosal surface</th>
                  <th>Stool consistency</th>
                  <th>Total colitis score</th>
                  <th>Number of tumors-Size 1</th>
                  <th>Number of tumors-Size 2</th>
                  <th>Number of tumors-Size 3</th>
                  <th>Number of tumors-Size 4</th>
                  <th>Number of tumors-Size 5</th>
                  <th>Total tumor number</th>
                  <th>Tumor Load</th>
                  <th>Age({{assay.mouse_age|default_if_none:"TBD"}})</th>
                  <th>Comment</th>
                </tr>
              </thead>
              <tbody>
                {% for assay in measures %}
                  <tr class="table-row" data-href="#tabledata" class="btn" data-toggle="popover" data-img="../../static/dist/img/phenLogo.png" title='<img src="../../static/dist/img/phenLogo.png" class="img-circle mr-sm-5" alt="Sample Image" width="40" height="40"><h5><b>Mouse {{assay.mid}}</h5>' data-content='
                    <div class="media"></div><div class="media-body"><p><b>Gender</b>: {{assay.mid.gender|default_if_none:""}}</p>
                    <p><b>Genotype</b>: {{assay.mid.genotype|default_if_none:""}}</p> 
                    <p><b>Date of Birth</b>: {{assay.mid.date|default_if_none:""}}</p> 
                    <p><b>Age</b>: {{assay.mid.age|default_if_none:""}} </p> 
                    <p><b>Induced</b>: {{assay.mid.induced|default_if_none:""}}</p>     
                    <p><b>Treated</b>: {{assay.mid.treated|default_if_none:""}}</p> 
                    <p><b>Diet</b>: {{assay.mid.diet|default_if_none:""}}</p> 
                    <p><b>Other Mouse Information</b>: {{assay.mid.mouse_info|default_if_none:""}}</p>
                    <p><b>Other environmental data</b>: {{assay.mid.other|default_if_none:""}}</p></div>'>
                    <!--<td>{{ assay.assayid }}</td>-->
                    <td>{{ assay.mid|default_if_none:"" }}</td>
                    <td>{{ assay.mid.genotype|default_if_none:"" }}</td>          
                    <td>{{ assay.timepoint|default_if_none:"" }}</td>
                    <td>{{ assay.measurement_date|default_if_none:"" }}</td>
                    <td>{{ assay.thicken_colon|default_if_none:"" }}</td>
                    <td>{{ assay.changes_vascular|default_if_none:"" }}</td>
                    <td>{{ assay.fibrin_visible|default_if_none:"" }}</td>
                    <td>{{ assay.granularity_mucosak|default_if_none:"" }}</td>
                    <td>{{ assay.stool_consistency|default_if_none:"" }}</td>
                    <td>{{ assay.total_colitis_score|default_if_none:"" }}</td>
                    <td>{{ assay.num_tumor_size_1|default_if_none:"" }}</td>
                    <td>{{ assay.num_tumor_size_2|default_if_none:"" }}</td>
                    <td>{{ assay.num_tumor_size_3|default_if_none:"" }}</td>
                    <td>{{ assay.num_tumor_size_4|default_if_none:"" }}</td>
                    <td>{{ assay.num_tumor_size_5|default_if_none:"" }}</td>
                    <td>{{ assay.total_tumor_num|default_if_none:"" }}</td>
                    <td>{{ assay.tumor_load|default_if_none:"" }}</td>
                    <td>{{ assay.age|default_if_none:"" }}</td>
                    <td>{{ assay.comment|default_if_none:"" }}</td>
                  </tr>
                  </tr>
                {% endfor %}
              </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
{% endblock %}

{% block measured_values %}
  Number of tumors-Size <br>
  Total tumor number<br>
  Tumor Load<br>
{% endblock %}

{% block min_models %}
 7M + 7F
{% endblock %}

{% block assaytype_content %}
                    <p></p>
                    <p></p>
                    <p></p>
                    <p>An <b>Endoscopic</b> phenotypic assay was performed on <b>{{total}} mice</b>.</p>
                    <p> The charts show the results of measuring <b>tumor load</b> in <b>{{females}}
                    female</b>, <b>{{males}} male</b> mutants compared to control dataset</p> 
                    <p> The mutants are {% for gene in genotype %}gene{% endfor %}.</p>
                    }
{% endblock %}

{% block info_content %}
<div id="Scoring"><div class="row"><div class="col-md-7"><h3>Endoscopic Colitis Score</h3></div><div class="col-md-5"><h3>Endoscopic scoring of tumor development</h3></div></div></div> 
    <div class="row">
          <!-- Left col -->
      <div class="col-md-7">
            <div class="card">
              <div class="card-header border-0" style="justify-content: center;">
                <h3 class="card-title">Murine endoscopic index of colitis severity (MEICS)</h3>
                <div class="card-tools">
                  <a href="#" class="btn btn-tool btn-sm">
                    <i class="fas fa-download"></i>
                  </a>
                  <a href="#" class="btn btn-tool btn-sm">
                    <i class="fas fa-bars"></i>
                  </a>
                </div>
              </div>
              <div class="card-body table-responsive p-0">
                <table class="table table-striped table-valign-middle">
                      <thead>
                          <tr>
                              <th> </th>
                              <th>0</th>
                              <th>1</th>
                              <th>2</th>
                              <th>3</th>
                              <th><b>Total</b></th>
                          </tr>
                      </thead>
                      <tbody>
                            <tr>
                              <td><b>Thickening of the colon</b></td>
                              <td>Transparent</td>
                              <td>Moderate</td>
                              <td>Marked</td>
                              <td>Non-transparent</td>
                              <td>0-3</td>
                          </tr>
                          <tr>
                              <td><b>Changes of the vascular pattern</b></td>
                              <td>Normal</td>
                              <td>Moderate</td>
                              <td>Marked</td>
                              <td>Bleeding</td>
                              <td>0-3</td>
                          </tr>
                            <tr>
                              <td><b>Fibrin visible</b></td>
                              <td>None</td>
                              <td> </td>
                              <td>Marked</td>
                              <td>Extreme</td>
                              <td>0-3</td>
                          </tr>
                            <tr>
                              <td><b>Granularity of the mucosal surface</b></td>
                              <td>None</td>
                              <td>Moderate</td>
                              <td>Marked</td>
                              <td>Extreme</td>
                              <td>0-3</td>
                          </tr>
                            <tr>
                              <td><b>Stool consistency</b></td>
                              <td>Normal+solid</td>
                              <td> </td>
                              <td>Marked</td>
                              <td>Spread</td>
                              <td>0-3</td>
                          </tr>
                          <tr>
                              <td> </td>
                              <td> </td>
                              <td> </td>
                              <td> </td>
                              <td> </td>
                              <td><b>Overall:0-15</b></td>
                          </tr>                                     
                      </tbody>
                </table>
              </div>
            </div>
      </div>

      <div class="col-md-5">
            <div class="card">
              <div class="card-header border-0" style="justify-content: center;">
                <h3 class="card-title"> Endoscopic scoring of tumor development</h3>
                <div class="card-tools">
                  <a href="#" class="btn btn-tool btn-sm">
                    <i class="fas fa-download"></i>
                  </a>
                  <a href="#" class="btn btn-tool btn-sm">
                    <i class="fas fa-bars"></i>
                  </a>
                </div>
              </div>
              <div class="card-body table-responsive p-0">
                <table class="table table-striped table-valign-middle">
                      <thead>
                          <tr>
                              <th>Tumor size</th>
                              <th>Score</th>
                          </tr>
                      </thead>
                      <tbody>
                            <tr>
                              <td>Just detectable</td>
                              <td>1</td>
                          </tr>
                          <tr>
                              <td>1/8</td>
                              <td>2</td>
                          </tr>
                            <tr>
                              <td>1/4</td>
                              <td>3</td>
                          </tr>
                            <tr>
                              <td>1/2</td>
                              <td>4</td>
                          </tr>
                            <tr>
                              <td>≥1/2</td>
                              <td>5</td>
                          </tr>                                   
                      </tbody>
                </table>
              </div>
            </div>
      </div>
    </div>
{% endblock%}